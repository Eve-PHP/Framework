<?php //-->
/**
 * A Custom Project
 *
 * Copyright and license information can be found at LICENSE
 * distributed with this package.
 */

class {{model_test_namespace}}{{capital name}}UpdateTest extends PHPUnit_Framework_TestCase
{
    public function testErrors()
    {
        $errors = eve()->model('{{name}}')->update()->errors();
        $this->assertEquals('Cannot be empty', $errors['{{name}}_id']);
    }

    public function testProcess()
    {
        ${{name}} = eve()->registry()->get('test', '{{name}}');

        $model = eve()
            ->model('{{name}}')
            ->update()
            ->process(array(
                '{{name}}_id' => ${{name}}['{{name}}_id'],
                {{#loop fields}}{{#if value.required}}
                '{{key}}' => {{value.sample}},
                {{/if}}{{/loop}}
                ));

        $this->assertEquals(${{name}}['{{name}}_id'], $model['{{name}}_id']);
    }
}